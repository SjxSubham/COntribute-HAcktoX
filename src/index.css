@tailwind base;
@tailwind components;
@tailwind utilities;
@import "tailwindcss";
@custom-variant dark (&:where(.dark, .dark *));


@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Screen reader helper */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Skip link: visually hidden until focus/active */
  .skip-to-content {
    position: absolute;
    left: -9999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }

  .skip-to-content:focus,
  .skip-to-content:active {
    left: 1rem;
    top: 4rem;
    width: auto;
    height: auto;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    background: white;
    color: #7c3aed;
    z-index: 9999;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);
  }

  /* Reduced motion: minimize animations & transitions */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Also reduce AOS animations when prefers-reduced-motion is enabled */
    [data-aos] {
      transition: none !important;
    }
  }
}

@layer utilities {
  .animation-delay-2000 {
    animation-delay: 2s;
  }

  .animation-delay-4000 {
    animation-delay: 4s;
  }

  /* Focus ring fallback for non-Tailwind or legacy browsers */
  .focus-visible-fallback:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.18), 0 0 0 2px rgba(236, 72, 153, 0.35);
    border-radius: 0.375rem;
  }

  /* High contrast / accessible color helpers */
  .text-high-contrast {
    color: #ffffff;
  }

  .text-medium-contrast {
    color: #e0e7ff;
  }

  .text-accessible-muted {
    color: #c7d2fe;
  }
}

:where(a, button, input, select, textarea, summary, [tabindex], [role="button"], [role="link"]):focus:not(:focus-visible) {
  outline: none;
}

/* Strong focus-visible ring â€” includes a darker halo so it's visible on many backgrounds */
:where(a, button, input, select, textarea, summary, [tabindex], [role="button"], [role="link"]):focus-visible {
  outline: none;
  box-shadow:
    0 0 0 5px rgba(0, 0, 0, 0.5),
    0 0 0 4px rgba(236, 72, 153, 0.18),
    0 0 0 2px rgba(236, 72, 153, 0.35);
  border-radius: 0.375rem;
}

/* Polyfill fallback if browser doesn't support :focus-visible */
@supports not selector(:focus-visible) {
  .using-keyboard :focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.18), 0 0 0 2px rgba(236, 72, 153, 0.35);
    border-radius: 0.375rem;
  }
}

@keyframes blob {
  0% {
    transform: translate(0, 0) scale(1);
  }

  33% {
    transform: translate(30px, -50px) scale(1.1);
  }

  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }

  100% {
    transform: translate(0, 0) scale(1);
  }
}

.animate-blob {
  animation: blob 7s infinite;
}

@keyframes counter-pop {
  0% {
    transform: scale(1);
    color: inherit;
  }

  50% {
    transform: scale(1.2);
    color: #10b981;
    /* Green highlight at peak */
    text-shadow: 0 0 8px rgba(16, 185, 129, 0.6);
  }

  100% {
    transform: scale(1);
    color: inherit;
  }
}

.visitor-pop {
  animation: counter-pop 0.7s ease-out;
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .bg-white\/10 {
    background-color: rgba(255, 255, 255, 0.4);
  }

  .bg-white\/5 {
    background-color: rgba(255, 255, 255, 0.3);
  }

  .text-indigo-200 {
    color: #e0e7ff;
  }
}

/* gradient text fallback */
.bg-clip-text {
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.bg-clip-text.fallback-solid {
  background: none !important;
  color: #ffffff !important;
}

/* Print helpers */
@media print {
  .bg-gradient-to-br {
    background: white !important;
  }

  .text-transparent {
    color: black !important;
  }

  .bg-clip-text {
    background: none !important;
    -webkit-background-clip: initial !important;
    background-clip: initial !important;
  }
}
